# Lab3

> 计64 翁家翌 2016011446 

## 练习1

翻译注释即可。

PTE和PDE的组成基本相同，均为高20位为基址，低12位为各种标志位，标志位的各项含义详见 Lab2 报告中的具体描述，这里指出在本次实验中有用的位：

| 位   | 名称 | 含义 | 用法 |
| ---- | ---- | ---- | --- |
| 0     | P     | 页面是否在内存中，若此位为0则其他位可随意使用                           |存放交换分区信息，可用于页替换算法实现|
| 5     | A     | 在上次清零之后，该页是否被访问（读或写）过  |可用于时钟替换算法和拓展时钟替换算法的实现|
| 6 | D | 在上次清零之后，该页是否被写过 |可用于拓展时钟替换算法实现|

如果ucore执行过程中访问内存，出现了页访问异常，根据 https://chyyuu.gitbooks.io/ucore_os_docs/content/lab3/lab3_4_page_fault_handler.html ，CPU把引起页访问异常的线性地址装到寄存器CR2中，并给出了出错码errorCode，说明了页访问异常的类型。并且CPU在当前内核栈保存当前被打断的程序现场，即依次压入当前被打断程序使用的EFLAGS，CS，EIP，errorCode。随后查询IDT找到中断服务程序入口点，把例程的地址加载到CS和EIP寄存器中，开始执行中断服务例程。

## 练习2

翻译注释即可。

足以支持。设计方案见拓展1.

需要被换出的页特征是 `PTE_A` 和 `PTE_D` 位均为0，通过循环链表按顺序遍历查找即可找出所有这种页。

### 页换入

### 页换出

## 拓展1

### 算法设计

### 测试用例

### 运行结果

## 总结

#### 本实验中重要的知识点，以及与对应的OS原理中的知识点

1. FIFO
2. 拓展时钟替换算法
3. 缺页异常

#### 本实验中没有对应的

1. 最优算法、LRU、最不常用算法
2. Belady现象
3. 全局页替换算法
4. 抖动和负载控制